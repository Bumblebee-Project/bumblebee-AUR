# Maintainer: Samsagax <samsagax@gmail.com>

pkgname=lib32-nvidia-utils-bumblebee

_pacman_get_key()
{
  pacman --print --print-format $1 -S lib32-nvidia-utils | grep lib32-nvidia-utils
}

pkgver=290.10
pkgrel=1
pkgdesc="NVIDIA drivers utilities and libraries (32-bit). Repacked and installed in different folder to be used simultaneously with libgl."
arch=('x86_64')
url="http://www.nvidia.com/"
depends=('lib32-gcc-libs' 'lib32-libxvmc' 'lib32-zlib' "nvidia-utils-bumblebee=$pkgver")
conflicts=()
provides=("lib32-nvidia-utils=$pkgver")
license=('custom')
install=nvidia.install
source=$(_pacman_get_key %l)
md5sums=('a4505518754bc8d6f5b43b8d86a3b7a7')

build()
{
  cd $srcdir
  msg "Copying files..."
  cp -a usr $pkgdir || return 1
  mkdir -p $pkgdir/usr/libtemp/nvidia-bumblebee
  mv $pkgdir/usr/lib32/* $pkgdir/usr/libtemp/nvidia-bumblebee/
  mv -T $pkgdir/usr/libtemp/ $pkgdir/usr/lib32/

  #mkdir $pkgdir/usr
  #cp -a usr/share $pkgdir/usr/share || return 1
  #mkdir $pkgdir/usr/lib32
  #cp -a usr/lib32 $pkgdir/usr/lib32/nvidia-bumblebee || return 1
}
